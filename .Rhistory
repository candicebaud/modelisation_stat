TRUE ~ 0
),
num_sat = case_when(
sat == 1~ cumsum(sat) - 1,
TRUE ~ 0),
sun = case_when(
weekdays(jour) == 'dimanche' ~ 1,
TRUE ~ 0
),
num_sun = case_when(
sun == 1~ cumsum(sun) - 1,
TRUE ~ 0),
week = num_monday + num_tuesday + num_wed + num_thur + num_fri + num_sat + num_sun
)
#données normales sur 7 jours
data_agreg
View(data_agreg)
data_agreg <- data_agreg %>% mutate(
monday = case_when(
weekdays(jour) == 'lundi' ~ 1,
TRUE ~ 0
),
num_monday = case_when(
monday == 1~ cumsum(monday),
TRUE ~ 0),
tuesday = case_when(
weekdays(jour) == 'mardi' ~ 1,
TRUE ~ 0
),
num_tuesday = case_when(
tuesday == 1~ cumsum(tuesday),
TRUE ~ 0),
wed = case_when(
weekdays(jour) == 'mercredi' ~ 1,
TRUE ~ 0
),
num_wed = case_when(
wed == 1~ cumsum(wed) ,
TRUE ~ 0),
thur = case_when(
weekdays(jour) == 'jeudi' ~ 1,
TRUE ~ 0
),
num_thur = case_when(
thur == 1~ cumsum(thur) - 1,
TRUE ~ 0),
fri = case_when(
weekdays(jour) == 'vendredi' ~ 1,
TRUE ~ 0
),
num_fri = case_when(
fri == 1~ cumsum(fri) - 1,
TRUE ~ 0),
sat = case_when(
weekdays(jour) == 'samedi' ~ 1,
TRUE ~ 0
),
num_sat = case_when(
sat == 1~ cumsum(sat) - 1,
TRUE ~ 0),
sun = case_when(
weekdays(jour) == 'dimanche' ~ 1,
TRUE ~ 0
),
num_sun = case_when(
sun == 1~ cumsum(sun) - 1,
TRUE ~ 0),
week = num_monday + num_tuesday + num_wed + num_thur + num_fri + num_sat + num_sun
)
View(data_agreg)
#données normales sur 7 jours
data_agreg %>% group_by(week) %>% summarise()
#données normales sur 7 jours
data_agreg %>% group_by(week) %>% summarise(s=sum(Taux_agrégé_hosp))
#données normales sur 7 jours
data_agreg %>% group_by(week) %>% summarise(s=sum(Taux_agrégé_hosp))%>%ggplot(aes(x=week,y=s))+
geom_line()
#données normales sur 7 jours
data_agreg %>% group_by(week) %>% summarise(s=sum(Taux_agrégé_hosp))%>%ggplot(aes(x=week,y=s))+
geom_line()
#la série par semaine
#data_agreg <- data_agreg %>% mutate(jour_ref = 1,jour_num = cumsum(jour_ref))
#data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d'))%>% group_by(year(jour), month(jour),week) %>% summarise(s = sum(diff_log_agreg), j = jour_num)%>%ggplot(aes(x=j,y=s)) +geom_line()+ geom_smooth(method = lm, formula = y ~ poly(x, 10))
#données normales sur 7 jours
g1 <- data_agreg %>% group_by(week) %>% summarise(s=sum(Taux_agrégé_hosp))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Hospitalisations')
g2 <- data_agreg %>% group_by(week) %>% summarise(s=sum(Taux_agrege_rea))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Réanimations')
g3 <- data_agreg %>% group_by(week) %>% summarise(s=sum(Taux_agrege_dc))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Décès')
g4 <- data_agreg %>% group_by(week) %>% summarise(s=sum(Taux_agrege_rad))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Retours à domicile')
plot_grid(g1,g2,g3,g4)
#données normales sur 7 jours
data_agreg
View(data_agreg)
#la série par semaine
#data_agreg <- data_agreg %>% mutate(jour_ref = 1,jour_num = cumsum(jour_ref))
#data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d'))%>% group_by(year(jour), month(jour),week) %>% summarise(s = sum(diff_log_agreg), j = jour_num)%>%ggplot(aes(x=j,y=s)) +geom_line()+ geom_smooth(method = lm, formula = y ~ poly(x, 10))
#données normales sur 7 jours
g1 <- data_agreg %>% group_by(week) %>% summarise(s=sum(Taux_agrégé_hosp))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Hospitalisations')
g2 <- data_agreg %>% group_by(week) %>% summarise(s=sum(Taux_agrege_rea))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Réanimations')
g3 <- data_agreg %>% group_by(week) %>% summarise(s=sum(Taux_agrege_dc))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Décès')
g4 <- data_agreg %>% group_by(week) %>% summarise(s=sum(Taux_agrege_rad))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Retours à domicile')
plot_grid(g1,g2,g3,g4)
#données normales sur 7 jours
g1 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrégé_hosp))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Hospitalisations')
g1
#la série par semaine
#data_agreg <- data_agreg %>% mutate(jour_ref = 1,jour_num = cumsum(jour_ref))
#data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d'))%>% group_by(year(jour), month(jour),week) %>% summarise(s = sum(diff_log_agreg), j = jour_num)%>%ggplot(aes(x=j,y=s)) +geom_line()+ geom_smooth(method = lm, formula = y ~ poly(x, 10))
#données normales sur 7 jours
g1 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrégé_hosp))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Hospitalisations')
g2 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrege_rea))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Réanimations')
g3 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrege_dc))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Décès')
g4 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrege_rad))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Retours à domicile')
plot_grid(g1,g2,g3,g4)
knitr::opts_chunk$set(echo = FALSE, message=FALSE, warning=FALSE)
lapply(c("dplyr","chron","ggplot2","tidyr","questionr","survival","forcats","tidyselect",
"data.table","table1","lubridate", "ggpubr","viridis","finalfit","survminer",
"ggpubr", "ggthemes", "gridExtra", "rstatix","stringr",
"wesanderson","kableExtra", "naniar","boot","scales","ggsci", "stringr",
"Hmisc","DescTools","swimplot", 'stats', 'EnvStats', 'finalfit'),
library, character.only=TRUE)
#setwd("C:/Users/candi/Desktop/ETUDES/ENSAE2A/semestre 2/options/projet stat")
data <- read.csv('covid-hospit-incid-2023-03-31-18h01 (1).csv', sep=";")
data <- data %>% mutate(
jour = as.Date(jour , format = "%Y-%m-%d")
)
data <- data %>% mutate(
dep = as.factor(dep)
)
data <- data %>% filter(dep != '971') %>% filter(dep !='972')%>% filter(dep !='973')%>% filter(dep !='974')%>% filter(dep !='976')%>% filter(dep !='978') #pour supprimer les domtom
library(cowplot)
data_agreg <- data %>% group_by(jour) %>%summarise(Taux_agrégé_hosp = sum(incid_hosp), Taux_agrege_rea = sum(incid_rea), Taux_agrege_dc = sum(incid_dc), Taux_agrege_rad = sum(incid_rad))
g1 <- data_agreg %>% ggplot(aes(x=jour, y=Taux_agrégé_hosp)) + geom_line() + xlab('Date') + ylab("Hospitalisations")
g2 <- data_agreg %>% ggplot(aes(x=jour, y=Taux_agrege_rea)) + geom_line() + xlab('Date') + ylab("Réanimations")
g3 <- data_agreg %>% ggplot(aes(x=jour, y=Taux_agrege_dc)) + geom_line() + xlab('Date') + ylab("Décès")
g4 <- data_agreg %>% ggplot(aes(x=jour, y=Taux_agrege_rad)) + geom_line()+ xlab('Date') + ylab("Retours à domicile")
plot_grid(g1, g2, g3, g4)
#la série par semaine
#data_agreg <- data_agreg %>% mutate(jour_ref = 1,jour_num = cumsum(jour_ref))
#data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d'))%>% group_by(year(jour), month(jour),week) %>% summarise(s = sum(diff_log_agreg), j = jour_num)%>%ggplot(aes(x=j,y=s)) +geom_line()+ geom_smooth(method = lm, formula = y ~ poly(x, 10))
#données normales sur 7 jours
g1 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrégé_hosp))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Hospitalisations')
data_agreg <- data_agreg %>% mutate(
monday = case_when(
weekdays(jour) == 'lundi' ~ 1,
TRUE ~ 0
),
num_monday = case_when(
monday == 1~ cumsum(monday),
TRUE ~ 0),
tuesday = case_when(
weekdays(jour) == 'mardi' ~ 1,
TRUE ~ 0
),
num_tuesday = case_when(
tuesday == 1~ cumsum(tuesday),
TRUE ~ 0),
wed = case_when(
weekdays(jour) == 'mercredi' ~ 1,
TRUE ~ 0
),
num_wed = case_when(
wed == 1~ cumsum(wed) ,
TRUE ~ 0),
thur = case_when(
weekdays(jour) == 'jeudi' ~ 1,
TRUE ~ 0
),
num_thur = case_when(
thur == 1~ cumsum(thur) - 1,
TRUE ~ 0),
fri = case_when(
weekdays(jour) == 'vendredi' ~ 1,
TRUE ~ 0
),
num_fri = case_when(
fri == 1~ cumsum(fri) - 1,
TRUE ~ 0),
sat = case_when(
weekdays(jour) == 'samedi' ~ 1,
TRUE ~ 0
),
num_sat = case_when(
sat == 1~ cumsum(sat) - 1,
TRUE ~ 0),
sun = case_when(
weekdays(jour) == 'dimanche' ~ 1,
TRUE ~ 0
),
num_sun = case_when(
sun == 1~ cumsum(sun) - 1,
TRUE ~ 0),
week = num_monday + num_tuesday + num_wed + num_thur + num_fri + num_sat + num_sun
)
#la série par semaine
#data_agreg <- data_agreg %>% mutate(jour_ref = 1,jour_num = cumsum(jour_ref))
#data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d'))%>% group_by(year(jour), month(jour),week) %>% summarise(s = sum(diff_log_agreg), j = jour_num)%>%ggplot(aes(x=j,y=s)) +geom_line()+ geom_smooth(method = lm, formula = y ~ poly(x, 10))
#données normales sur 7 jours
g1 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrégé_hosp))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Hospitalisations')
g2 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrege_rea))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Réanimations')
g3 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrege_dc))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Décès')
g4 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrege_rad))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Retours à domicile')
plot_grid(g1,g2,g3,g4)
T_diff <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
diff_log <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
for (i in 2:length(data_agreg$Taux_agrégé_hosp)){
T_diff[i] = data_agreg$Taux_agrégé_hosp[i] - data_agreg$Taux_agrégé_hosp[i-1]
diff_log[i] = T_diff[i]/data_agreg$Taux_agrégé_hosp[i-1]
}
data_agreg <- data_agreg %>% mutate(
T_diff_agreg = T_diff,
diff_log_agreg = diff_log
)
knitr::opts_chunk$set(echo = FALSE, message=FALSE, warning=FALSE)
lapply(c("dplyr","chron","ggplot2","tidyr","questionr","survival","forcats","tidyselect",
"data.table","table1","lubridate", "ggpubr","viridis","finalfit","survminer",
"ggpubr", "ggthemes", "gridExtra", "rstatix","stringr",
"wesanderson","kableExtra", "naniar","boot","scales","ggsci", "stringr",
"Hmisc","DescTools","swimplot", 'stats', 'EnvStats', 'finalfit'),
library, character.only=TRUE)
#setwd("C:/Users/candi/Desktop/ETUDES/ENSAE2A/semestre 2/options/projet stat")
data <- read.csv('covid-hospit-incid-2023-03-31-18h01 (1).csv', sep=";")
data <- data %>% mutate(
jour = as.Date(jour , format = "%Y-%m-%d")
)
data <- data %>% mutate(
dep = as.factor(dep)
)
data <- data %>% filter(dep != '971') %>% filter(dep !='972')%>% filter(dep !='973')%>% filter(dep !='974')%>% filter(dep !='976')%>% filter(dep !='978') #pour supprimer les domtom
library(cowplot)
data_agreg <- data %>% group_by(jour) %>%summarise(Taux_agrégé_hosp = sum(incid_hosp), Taux_agrege_rea = sum(incid_rea), Taux_agrege_dc = sum(incid_dc), Taux_agrege_rad = sum(incid_rad))
g1 <- data_agreg %>% ggplot(aes(x=jour, y=Taux_agrégé_hosp)) + geom_line() + xlab('Date') + ylab("Hospitalisations")
g2 <- data_agreg %>% ggplot(aes(x=jour, y=Taux_agrege_rea)) + geom_line() + xlab('Date') + ylab("Réanimations")
g3 <- data_agreg %>% ggplot(aes(x=jour, y=Taux_agrege_dc)) + geom_line() + xlab('Date') + ylab("Décès")
g4 <- data_agreg %>% ggplot(aes(x=jour, y=Taux_agrege_rad)) + geom_line()+ xlab('Date') + ylab("Retours à domicile")
plot_grid(g1, g2, g3, g4)
data_agreg <- data_agreg %>% mutate(
monday = case_when(
weekdays(jour) == 'lundi' ~ 1,
TRUE ~ 0
),
num_monday = case_when(
monday == 1~ cumsum(monday),
TRUE ~ 0),
tuesday = case_when(
weekdays(jour) == 'mardi' ~ 1,
TRUE ~ 0
),
num_tuesday = case_when(
tuesday == 1~ cumsum(tuesday),
TRUE ~ 0),
wed = case_when(
weekdays(jour) == 'mercredi' ~ 1,
TRUE ~ 0
),
num_wed = case_when(
wed == 1~ cumsum(wed) ,
TRUE ~ 0),
thur = case_when(
weekdays(jour) == 'jeudi' ~ 1,
TRUE ~ 0
),
num_thur = case_when(
thur == 1~ cumsum(thur) - 1,
TRUE ~ 0),
fri = case_when(
weekdays(jour) == 'vendredi' ~ 1,
TRUE ~ 0
),
num_fri = case_when(
fri == 1~ cumsum(fri) - 1,
TRUE ~ 0),
sat = case_when(
weekdays(jour) == 'samedi' ~ 1,
TRUE ~ 0
),
num_sat = case_when(
sat == 1~ cumsum(sat) - 1,
TRUE ~ 0),
sun = case_when(
weekdays(jour) == 'dimanche' ~ 1,
TRUE ~ 0
),
num_sun = case_when(
sun == 1~ cumsum(sun) - 1,
TRUE ~ 0),
week = num_monday + num_tuesday + num_wed + num_thur + num_fri + num_sat + num_sun
)
#la série par semaine
#data_agreg <- data_agreg %>% mutate(jour_ref = 1,jour_num = cumsum(jour_ref))
#data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d'))%>% group_by(year(jour), month(jour),week) %>% summarise(s = sum(diff_log_agreg), j = jour_num)%>%ggplot(aes(x=j,y=s)) +geom_line()+ geom_smooth(method = lm, formula = y ~ poly(x, 10))
#données normales sur 7 jours
g1 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrégé_hosp))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Hospitalisations')
g2 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrege_rea))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Réanimations')
g3 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrege_dc))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Décès')
g4 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrege_rad))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Retours à domicile')
plot_grid(g1,g2,g3,g4)
T_diff <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
diff_log <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
for (i in 2:length(data_agreg$Taux_agrégé_hosp)){
T_diff[i] = data_agreg$Taux_agrégé_hosp[i] - data_agreg$Taux_agrégé_hosp[i-1]
diff_log[i] = T_diff[i]/data_agreg$Taux_agrégé_hosp[i-1]
}
data_agreg <- data_agreg %>% mutate(
T_diff_agreg = T_diff,
diff_log_agreg = diff_log
)
knitr::opts_chunk$set(echo = FALSE, message=FALSE, warning=FALSE)
lapply(c("dplyr","chron","ggplot2","tidyr","questionr","survival","forcats","tidyselect",
"data.table","table1","lubridate", "ggpubr","viridis","finalfit","survminer",
"ggpubr", "ggthemes", "gridExtra", "rstatix","stringr",
"wesanderson","kableExtra", "naniar","boot","scales","ggsci", "stringr",
"Hmisc","DescTools","swimplot", 'stats', 'EnvStats', 'finalfit'),
library, character.only=TRUE)
#setwd("C:/Users/candi/Desktop/ETUDES/ENSAE2A/semestre 2/options/projet stat")
data <- read.csv('covid-hospit-incid-2023-03-31-18h01 (1).csv', sep=";")
data <- data %>% mutate(
jour = as.Date(jour , format = "%Y-%m-%d")
)
data <- data %>% mutate(
dep = as.factor(dep)
)
data <- data %>% filter(dep != '971') %>% filter(dep !='972')%>% filter(dep !='973')%>% filter(dep !='974')%>% filter(dep !='976')%>% filter(dep !='978') #pour supprimer les domtom
library(cowplot)
data_agreg <- data %>% group_by(jour) %>%summarise(Taux_agrégé_hosp = sum(incid_hosp), Taux_agrege_rea = sum(incid_rea), Taux_agrege_dc = sum(incid_dc), Taux_agrege_rad = sum(incid_rad))
g1 <- data_agreg %>% ggplot(aes(x=jour, y=Taux_agrégé_hosp)) + geom_line() + xlab('Date') + ylab("Hospitalisations")
g2 <- data_agreg %>% ggplot(aes(x=jour, y=Taux_agrege_rea)) + geom_line() + xlab('Date') + ylab("Réanimations")
g3 <- data_agreg %>% ggplot(aes(x=jour, y=Taux_agrege_dc)) + geom_line() + xlab('Date') + ylab("Décès")
g4 <- data_agreg %>% ggplot(aes(x=jour, y=Taux_agrege_rad)) + geom_line()+ xlab('Date') + ylab("Retours à domicile")
plot_grid(g1, g2, g3, g4)
data_agreg <- data_agreg %>% mutate(
monday = case_when(
weekdays(jour) == 'lundi' ~ 1,
TRUE ~ 0
),
num_monday = case_when(
monday == 1~ cumsum(monday),
TRUE ~ 0),
tuesday = case_when(
weekdays(jour) == 'mardi' ~ 1,
TRUE ~ 0
),
num_tuesday = case_when(
tuesday == 1~ cumsum(tuesday),
TRUE ~ 0),
wed = case_when(
weekdays(jour) == 'mercredi' ~ 1,
TRUE ~ 0
),
num_wed = case_when(
wed == 1~ cumsum(wed) ,
TRUE ~ 0),
thur = case_when(
weekdays(jour) == 'jeudi' ~ 1,
TRUE ~ 0
),
num_thur = case_when(
thur == 1~ cumsum(thur) - 1,
TRUE ~ 0),
fri = case_when(
weekdays(jour) == 'vendredi' ~ 1,
TRUE ~ 0
),
num_fri = case_when(
fri == 1~ cumsum(fri) - 1,
TRUE ~ 0),
sat = case_when(
weekdays(jour) == 'samedi' ~ 1,
TRUE ~ 0
),
num_sat = case_when(
sat == 1~ cumsum(sat) - 1,
TRUE ~ 0),
sun = case_when(
weekdays(jour) == 'dimanche' ~ 1,
TRUE ~ 0
),
num_sun = case_when(
sun == 1~ cumsum(sun) - 1,
TRUE ~ 0),
week = num_monday + num_tuesday + num_wed + num_thur + num_fri + num_sat + num_sun
)
#la série par semaine
#data_agreg <- data_agreg %>% mutate(jour_ref = 1,jour_num = cumsum(jour_ref))
#data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d'))%>% group_by(year(jour), month(jour),week) %>% summarise(s = sum(diff_log_agreg), j = jour_num)%>%ggplot(aes(x=j,y=s)) +geom_line()+ geom_smooth(method = lm, formula = y ~ poly(x, 10))
#données normales sur 7 jours
g1 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrégé_hosp))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Hospitalisations')
g2 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrege_rea))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Réanimations')
g3 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrege_dc))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Décès')
g4 <- data_agreg %>% group_by(week) %>% summarise(s=mean(Taux_agrege_rad))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Retours à domicile')
plot_grid(g1,g2,g3,g4)
T_diff_hosp <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
diff_log <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
for (i in 2:length(data_agreg$Taux_agrégé_hosp)){
T_diff_hosp[i] = data_agreg$Taux_agrégé_hosp[i] - data_agreg$Taux_agrégé_hosp[i-1]
diff_log_hosp[i] = T_diff_hosp[i]/data_agreg$Taux_agrégé_hosp[i-1]
}
T_diff_hosp <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
diff_log_hosp <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
for (i in 2:length(data_agreg$Taux_agrégé_hosp)){
T_diff_hosp[i] = data_agreg$Taux_agrégé_hosp[i] - data_agreg$Taux_agrégé_hosp[i-1]
diff_log_hosp[i] = T_diff_hosp[i]/data_agreg$Taux_agrégé_hosp[i-1]
}
T_diff_rea <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
diff_log_rea <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
for (i in 2:length(data_agreg$Taux_agrégé_hosp)){
T_diff_rea[i] = data_agreg$Taux_agrégé_hosp[i] - data_agreg$Taux_agrégé_hosp[i-1]
diff_log_rea[i] = T_diff_rea[i]/data_agreg$Taux_agrégé_hosp[i-1]
}
data_agreg <- data_agreg %>% mutate(
T_diff_hosp_agreg = T_diff_hosp,
diff_log_hosp_agreg = diff_log_hosp,
T_diff_rea_agreg = T_diff_rea,
diff_log_rea_agreg = diff_log_rea,
)
data_agreg <- data_agreg %>% mutate(
T_diff_hosp_agreg = T_diff_hosp,
diff_log_hosp_agreg = diff_log_hosp,
T_diff_rea_agreg = T_diff_rea,
diff_log_rea_agreg = diff_log_rea)
data_agreg
g1 <- data_agreg %>% group_by(week) %>% summarise(s=mean(diff_log_hosp_agreg))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Hospitalisations')
g1
g1 <- data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d')) %>% group_by(week) %>% summarise(s=mean(diff_log_hosp_agreg))%>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('Semaine') + ylab('Hospitalisations')
g1
data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d')) %>% ggplot(aes(x=jour, y =diff_log_agreg)) + geom_line() #on filtre les données car anomalies fin février
data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d')) %>% ggplot(aes(x=jour, y =diff_log_agreg_hosp)) + geom_line() #on filtre les données car anomalies fin février
g1 <- data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d')) %>%ggplot(aes(x=jour,y=diff_log_hosp_agreg))+
geom_line() + xlab('Semaine') + ylab('Hospitalisations')
g1
data_agreg %>% group_by(week) %>% summarise(s_hosp =mean(Taux_agrégé_hosp), s_rea=mean(Taux_agrege_rea), s_dc=mean(Taux_agrege_dc), s_rad =mean(Taux_agrege_rad))
data_by_week <- data_agreg %>% group_by(week) %>% summarise(s_hosp =mean(Taux_agrégé_hosp), s_rea=mean(Taux_agrege_rea), s_dc=mean(Taux_agrege_dc), s_rad =mean(Taux_agrege_rad))
T_diff_hosp <- numeric(length =length(data_by_week$Taux_agrégé_hosp))
diff_log_hosp <- numeric(length =length(data_by_week$Taux_agrégé_hosp))
for (i in 2:length(data_by_week$Taux_agrégé_hosp)){
T_diff_hosp[i] = data_by_week$Taux_agrégé_hosp[i] - data_by_week$Taux_agrégé_hosp[i-1]
diff_log_hosp[i] = T_diff_hosp[i]/data_by_week$Taux_agrégé_hosp[i-1]
}
data_by_week <- data_agreg %>% group_by(week) %>% summarise(Taux_agrégé_hosp =mean(Taux_agrégé_hosp), Taux_agrege_rea=mean(Taux_agrege_rea), Taux_agrege_dc=mean(Taux_agrege_dc), Taux_agrege_rad =mean(Taux_agrege_rad))
T_diff_hosp <- numeric(length =length(data_by_week$Taux_agrégé_hosp))
diff_log_hosp <- numeric(length =length(data_by_week$Taux_agrégé_hosp))
for (i in 2:length(data_by_week$Taux_agrégé_hosp)){
T_diff_hosp[i] = data_by_week$Taux_agrégé_hosp[i] - data_by_week$Taux_agrégé_hosp[i-1]
diff_log_hosp[i] = T_diff_hosp[i]/data_by_week$Taux_agrégé_hosp[i-1]
}
T_diff_rea <- numeric(length =length(data_by_week$Taux_agrégé_hosp))
diff_log_rea <- numeric(length =length(data_by_week$Taux_agrégé_hosp))
for (i in 2:length(data_by_week$Taux_agrégé_hosp)){
T_diff_rea[i] = data_by_week$Taux_agrégé_hosp[i] - data_by_week$Taux_agrégé_hosp[i-1]
diff_log_rea[i] = T_diff_rea[i]/data_by_week$Taux_agrégé_hosp[i-1]
}
data_by_week <- data_by_week %>% mutate(
T_diff_hosp_agreg = T_diff_hosp,
diff_log_hosp_agreg = diff_log_hosp,
T_diff_rea_agreg = T_diff_rea,
diff_log_rea_agreg = diff_log_rea)
g1 <- data_agreg %>%ggplot(aes(x=week,y=diff_log_hosp_agreg))+
geom_line() + xlab('Semaine') + ylab('Hospitalisations')
g1
T_diff_hosp <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
diff_log_hosp <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
for (i in 2:length(data_agreg$Taux_agrégé_hosp)){
T_diff_hosp[i] = data_agreg$Taux_agrégé_hosp[i] - data_agreg$Taux_agrégé_hosp[i-1]
diff_log_hosp[i] = T_diff_hosp[i]/data_agreg$Taux_agrégé_hosp[i-1]
}
T_diff_rea <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
diff_log_rea <- numeric(length =length(data_agreg$Taux_agrégé_hosp))
for (i in 2:length(data_agreg$Taux_agrégé_hosp)){
T_diff_rea[i] = data_agreg$Taux_agrégé_hosp[i] - data_agreg$Taux_agrégé_hosp[i-1]
diff_log_rea[i] = T_diff_rea[i]/data_agreg$Taux_agrégé_hosp[i-1]
}
data_agreg <- data_agreg %>% mutate(
T_diff_hosp_agreg = T_diff_hosp,
diff_log_hosp_agreg = diff_log_hosp,
T_diff_rea_agreg = T_diff_rea,
diff_log_rea_agreg = diff_log_rea)
g1 <- data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d')) %>%ggplot(aes(x=jour,y=diff_log_hosp_agreg))+
geom_line() + xlab('Semaine') + ylab('Hospitalisations')
g1
g1 <- data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d')) %>%ggplot(aes(x=jour,y=diff_log_hosp_agreg))+
geom_line() + xlab('jour') + ylab('Hospitalisations')
g1
g2 <- data_agreg %>% filter(jour < as.Date('2023-02-01', format = '%Y-%m-%d')) %>% group_by(week) %>% summarise(s=mean(diff_log_hosp_agreg)) %>%ggplot(aes(x=week,y=s))+
geom_line() + xlab('jour') + ylab('Hospitalisations')
g2
