res[i] = indicatrice(x[i])
}
return(res)
}
indicatrice(1)
indicatrice(4)
indicatrice_vec(c(1,1,4,-7, 8))
#coef sont les coefficients de la régression linéaire
fonction_obtenue <- function(pts_rupture, coef, x){
sum = sum(coef[4:length(coef)]*(indicatrice_vec(x-pts_rupture))**2)
return(exp(coef[1] + coef[2]*x + coef[3]*x**2 + sum))
}
to_plot = fonction_obtenue(pts_rupture_hosp_num, coef, x)
plot(x, to_plot)
to_plot
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-21', '2022-04-01', '2022-05-14', '2022-06-29', '2022-07-31', '2022-09-30', '2022-10-31', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-22', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-29', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-27', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-20', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-23', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-22', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-21', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-20', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
View(data_rea)
View(data_agreg)
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-03-07', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-24', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-10', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-17', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
pts_rupture_hosp <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_hosp <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_hosp, format='%Y-%m-%d') == T)
pts_rupture_rea <- c('2022-01-02', '2022-02-15', '2022-04-01', '2022-05-13', '2022-07-04', '2022-07-31', '2022-09-30', '2022-10-30', '2022-12-01','2022-12-30')
data_rea <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rea, format='%Y-%m-%d') == T)
pts_rupture_dc <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_dc <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_dc, format='%Y-%m-%d') == T)
pts_rupture_rad <- c('2022-01-02', '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01','2022-12-30')
data_rad <- data_agreg %>% filter(jour %in% as.Date(pts_rupture_rad, format='%Y-%m-%d') == T)
par(mfrow=c(2,2))
plot(data_agreg$jour, data_agreg$m_hosp_diff, type='l', color = 'black', ylab = 'Hospitalisations', xlab = 'date')
lines(data_hosp$jour, data_hosp$m_hosp_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rea_diff, type='l', color = 'black', ylab = 'Réanimations', xlab = 'date')
lines(data_rea$jour, data_hosp$m_rea_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_dc_diff, type='l', color = 'black', ylab = 'Décès', xlab = 'date')
lines(data_dc$jour, data_hosp$m_dc_diff, type = 'l', col = 'red')
plot(data_agreg$jour, data_agreg$m_rad_diff, type='l', color = 'black', ylab = 'Retours à domicile', xlab = 'date')
lines(data_rad$jour, data_hosp$m_rad_diff, type = 'l', col = 'red')
liste_dates <- c( '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01')
pts_rupture_hosp_num <- corresp(liste_dates)
new_data <- ajout_base(pts_rupture_hosp_num, data_agreg)
reg <- lm(log(Taux_agrégé_hosp) ~ temps + I(temps^2) + V1 + V2 + V3 + V4 + V5 + V6 + V7 + V8, data = new_data)
summary(reg)
library('xtable')
xtable(reg)
summary(reg)
exp(coef[1])
coef = reg$coef
exp(coef[1])
summary(reg)
exp(8.17)
exp(coef[1] + coef[2]*x + coef[3]*x**3)
exp(coef[1] + coef[2]*x + coef[3]*x**2)
#autre essai
x = 1
exp(coef[1] + coef[2]*x + coef[3]*x**2)
exp(8.17 - 0.05)
coef[4]*indicatrice(x - pts_rupture[1])**2
coef[4]*indicatrice(x - pts_rupture_hosp_num[1])**2
pts_rupture_hosp_num
coef[4]*indicatrice(44 - pts_rupture_hosp_num[1])**2
#autre essai
x = 45
coef[4]*indicatrice(x - pts_rupture_hosp_num[1])**2
coef[4]*indicatrice(x - pts_rupture_hosp_num[1])**2 + coef[5]*indicatrice(x - pts_rupture_hosp_num[2])**2
pts_rupture_hosp_num
#autre essai
x = 91
coef[4]*indicatrice(x - pts_rupture_hosp_num[1])**2 + coef[5]*indicatrice(x - pts_rupture_hosp_num[2])**2
sum(coef[4:5]*(indicatrice_vec(x-pts_rupture)**2))
sum(coef[4:5]*(indicatrice_vec(x-pts_rupture_hosp_num)**2))
sum(coef[4:length(coef)]*(indicatrice_vec(x-pts_rupture))**2)
sum(coef[4:length(coef)]*(indicatrice_vec(x-pts_rupture_hosp_num))**2)
exp(coef[1] + coef[2]*x + coef[3]*x**2 + sum)
s =sum(coef[4:length(coef)]*(indicatrice_vec(x-pts_rupture_hosp_num))**2) #ça marche
exp(coef[1] + coef[2]*x + coef[3]*x**2 + s)
coef[1] + coef[2]*x + coef[3]*x**2
coef[1] + coef[2]*x + coef[3]*x**2 + s
x = 1
s = sum(coef[4:length(coef)]*(indicatrice_vec(x-pts_rupture_hosp_num))**2) #ça marche
exp(coef[1] + coef[2]*x + coef[3]*x**2 + s)
x = 2
s = sum(coef[4:length(coef)]*(indicatrice_vec(x-pts_rupture_hosp_num))**2) #ça marche
exp(coef[1] + coef[2]*x + coef[3]*x**2 + s)
to_plot <- rep(NA, 10)
for(x in 1:10){
to_plot[i] = exp(coef[1] + coef[2]*x + coef[3]*x**2 + sum(coef[4:length(coef)]*(indicatrice_vec(x-pts_rupture_hosp_num))**2))
}
to_plot <- rep(NA, 10)
for(x in 1:10){
to_plot[x] = exp(coef[1] + coef[2]*x + coef[3]*x**2 + sum(coef[4:length(coef)]*(indicatrice_vec(x-pts_rupture_hosp_num))**2))
}
plot(x, to_plot)
plot(to_plot)
to_plot <- rep(NA, 100)
for(x in 1:100){
to_plot[x] = exp(coef[1] + coef[2]*x + coef[3]*x**2 + sum(coef[4:length(coef)]*(indicatrice_vec(x-pts_rupture_hosp_num))**2))
}
plot(to_plot)
x = seq(from = 1, to = 363, by = 1)
to_plot <- rep(NA, length(x))
for(x in 1:100){
to_plot[x] = exp(coef[1] + coef[2]*x + coef[3]*x**2 + sum(coef[4:length(coef)]*(indicatrice_vec(x-pts_rupture_hosp_num))**2))
}
plot(x,to_plot)
#pb
x = seq(from = 1, to = 363, by = 1)
for(x in 1:100){
to_plot[x] = exp(coef[1] + coef[2]*x + coef[3]*x**2 + sum(coef[4:length(coef)]*(indicatrice_vec(x-pts_rupture_hosp_num))**2))
}
plot(x,to_plot)
x = seq(from = 1, to = 363, by = 1)
to_plot <- rep(NA, length(x))
for(z in 1:length(x)){
to_plot[z] = exp(coef[1] + coef[2]*z + coef[3]*z**2 + sum(coef[4:length(coef)]*(indicatrice_vec(z-pts_rupture_hosp_num))**2))
}
plot(x,to_plot)
summary(reg)
indicatrice_vec(0)
indicatrice_vec(4)
indicatrice_vec(4 - c(1,1,3))
x = seq(from = 1, to = 363, by = 1)
to_plot <- rep(NA, length(x))
for(z in 1:length(x)){
to_plot[z] = exp(coef[1] + coef[2]*z + coef[3]*z**2 + sum(coef[4:length(coef)]*(indicatrice_vec(z-pts_rupture_hosp_num[z]))**2))
}
x = seq(from = 1, to = 363, by = 1)
to_plot <- rep(NA, length(x))
for(z in 1:length(x)){
to_plot[z] = exp(coef[1] + coef[2]*z + coef[3]*z**2 + sum(coef[4:length(coef)]*(indicatrice(z-pts_rupture_hosp_num[z]))**2))
}
pts_rupture_hosp_num
x = seq(from = 1, to = 363, by = 1)
to_plot <- rep(NA, length(x))
for(z in 1:length(x)){
to_plot[z] = exp(coef[1] + coef[2]*z + coef[3]*z**2 + sum(coef[4:length(coef)]*(indicatrice(z-pts_rupture_hosp_num))**2))
}
to_plot <- rep(NA, length(x))
for(z in 1:length(x)){
to_plot[z] = exp(coef[1] + coef[2]*z + coef[3]*z**2 + sum(coef[4:length(coef)]*(indicatrice(z-pts_rupture_hosp_num))**2))
}
to_plot[z] = exp(coef[1] + coef[2]*z + coef[3]*z**2 + sum(coef[4:length(coef)]*(indicatrice_vec(z-pts_rupture_hosp_num))**2))
for(z in 1:length(x)){
to_plot[z] = exp(coef[1] + coef[2]*z + coef[3]*z**2 + sum(coef[4:length(coef)]*(indicatrice_vec(z-pts_rupture_hosp_num))**2))
}
plot(x,to_plot)
plot(x,to_plot)
lines(x, data_agreg$Taux_agrégé_hosp)
x = seq(from = 1, to = 363, by = 1)
to_plot <- rep(NA, length(x))
for(z in 1:length(x)){
to_plot[z] = coef[1] + coef[2]*z + coef[3]*z**2 + sum(coef[4:length(coef)]*(indicatrice_vec(z-pts_rupture_hosp_num))**2)
}
plot(x,to_plot)
lines(x, log(data_agreg$Taux_agrégé_hosp))
x = seq(from = 1, to = 363, by = 1)
to_plot <- rep(NA, length(x))
for(z in 1:length(x)){
to_plot[z] = exp(coef[1] + coef[2]*z + coef[3]*z**2 + sum(coef[4:length(coef)]*(indicatrice_vec(z-pts_rupture_hosp_num))**2))
}
plot(x,to_plot)
lines(x, data_agreg$Taux_agrégé_hosp)
x = seq(from = 1, to = 363, by = 1)
to_plot <- rep(NA, length(x))
for(z in 1:length(x)){
to_plot[z] = exp(coef[1] + coef[2]*z + coef[3]*z**2)
}
plot(x,to_plot)
lines(x, data_agreg$Taux_agrégé_hosp)
x = seq(from = 1, to = 363, by = 1)
to_plot <- rep(NA, length(x))
for(z in 1:length(x)){
to_plot[z] = coef[1] + coef[2]*z + coef[3]*z**2
}
plot(x,to_plot)
lines(x, log(data_agreg$Taux_agrégé_hosp))
plot(x, log(data_agreg$Taux_agrégé_hosp))
plot(x, log(data_agreg$Taux_agrégé_hosp), type='l')
plot(x, log(data_agreg$m_hosp), type='l')
x = seq(from = 1, to = 363, by = 0.01)
to_plot <- rep(NA, length(x))
for(z in 1:length(x)){
to_plot[z] = coef[1] + coef[2]*z + coef[3]*z**2
}
plot(x,to_plot)
coef
plot(x,to_plot)
x = seq(from = 1, to = 363, by = 0.01)
to_plot <- rep(NA, length(x))
for(z in (x)){
to_plot[z] = coef[1] + coef[2]*z + coef[3]*z**2
}
plot(x,to_plot)
x = seq(from = 1, to = 363, by = 0.01)
to_plot <- rep(NA, length(x))
for(z in x){
to_plot[z] = coef[1] + coef[2]*z + coef[3]*z**2
}
plot(x,to_plot)
x
coef[1] + coef[2]*x + coef[3]*z**2
#test sans ajouter les polynômes de chaque morceau
x = seq(from = 0, to = 363, by = 0.01)
plot(x,coef[1] + coef[2]*x + coef[3]*x**2)
liste_dates <- c( '2022-02-14', '2022-04-01', '2022-05-15', '2022-06-24', '2022-07-31', '2022-09-30', '2022-11-01', '2022-12-01')
pts_rupture_hosp_num <- corresp(liste_dates)
new_data <- ajout_base(pts_rupture_hosp_num, data_agreg)
reg <- lm(log(Taux_agrégé_hosp) ~ temps + I(temps^2) + V1 + V2 + V3 + V4 + V5 + V6 + V7 + V8, data = new_data)
summary(reg)
coef = reg$coef
coef
x = seq(from = 1, to = 363, by = 1)
to_plot <- rep(NA, length(x))
for(z in 1:length(x)){
to_plot[z] = exp(coef[1] + coef[2]*z + coef[3]*z**2 + sum(coef[4:length(coef)]*(indicatrice_vec(z-pts_rupture_hosp_num))**2))
}
plot(x,to_plot)
lines(x, data_agreg$Taux_agrégé_hosp)
x = seq(from = 0, to = 363, by = 0.01)
x
#test sans ajouter les polynômes de chaque morceau
x = seq(from = 0, to = 363, by = 0.1)
x
to_plot <- rep(NA, length(x))
to_plot
for(z in x){
to_plot[z] = coef[1] + coef[2]*z + coef[3]*z**2
}
to_plot
for(z in x){
to_plot[z] = coef[1] + coef[2]*z + coef[3]*z**2
}
to_plot
#test sans ajouter les polynômes de chaque morceau
x = seq(from = 0, to = 363, by = 1)
to_plot <- rep(NA, length(x))
for(z in x){
to_plot[z] = coef[1] + coef[2]*z + coef[3]*z**2
}
to_plot
#test sans ajouter les polynômes de chaque morceau
x = seq(from = 1, to = 363, by = 1)
x
to_plot <- rep(NA, length(x))
for(z in x){
to_plot[z] = coef[1] + coef[2]*z + coef[3]*z**2
}
plot(x,to_plot)
